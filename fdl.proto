syntax = "proto3";

package fdl;

enum PropertyType{
    META = 0;
    DATA = 1;
    LIST = 2;
}

enum MutationMode{
    NONE = 0;
    WRITE = 1; //Create / Update Property - will replace a list
    APPEND = 2; //Append items to a list
    REMOVE = 3; //Remove items from a list
    DELETE = 4; //Delete Property
}

enum MutationStatus{
    FAILURE = 0;
    SUCCESS = 1;
}

message Property{
    string property = 1;
    PropertyType type = 2;
    string value = 3; //Should always be a json array for list property types
    MutationMode mode = 4;
}

message MutationRequest{
    string fid = 1;
    map<string,Property> properties = 2;
    string member_id = 3;
}

message ReadRequest{
    string fid = 1;
    map<string,Property> properties = 2;
}

message MutationResponse{
    string fid = 1;
    MutationStatus status = 2;
    string status_message = 3;
}

message PropertiesResponse{
    string fid = 1;
    map<string,Property> properties = 2;
}

service Fdl{
    rpc Mutate(MutationRequest) returns (MutationResponse);
    rpc Read(ReadRequest) returns (PropertiesResponse);
}