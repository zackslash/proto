syntax = "proto3";

package metaroute;

option go_package = "github.com/fortifi/proto-go/metaroute";

message HTTPRequest {
    string subdomain = 1;
    string domain = 2;
    string path = 3;
    string method = 4;
    message HTTPParameter{
        repeated string values = 1;
    }
    map<string, HTTPParameter> post_params = 5;
    map<string, HTTPParameter> query_params = 6;
    map<string, HTTPParameter> headers = 7;
    string body = 8;
    string language = 9;
    string content_type = 10;
    message CustomerInformation{
        string brand_id = 1;
        string customer_fid = 2;
        string customer_name = 3;
        map<string, string> meta = 4;
    }
    CustomerInformation customer = 11;
}

message HTTPResponse{
    int32 status_code = 1;
    string body = 2;
    string content_type = 3;
    string language = 4;
    message HTTPHeaderParameter{
        repeated string values = 1;
    }
    map<string, HTTPHeaderParameter> headers = 5;
}

service MetaRoute{
    rpc HandleHTTPRequest(HTTPRequest) returns (HTTPResponse);
}